[{"title":"Decom an Azure AD App","type":0,"sectionRef":"#","url":"/How-to Guides/Azure Active Directory/Decom an Azure AD App","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Pre-requisits​","type":1,"pageTitle":"Decom an Azure AD App","url":"/How-to Guides/Azure Active Directory/Decom an Azure AD App#pre-requisits","content":"Must be an owner of the application or have admin privileges. "},{"title":"Locate the App​","type":1,"pageTitle":"Decom an Azure AD App","url":"/How-to Guides/Azure Active Directory/Decom an Azure AD App#locate-the-app","content":"Sign in to the Azure portal.Search and select the Azure Active Directory app.Under Manage, select App registrations and select the application(Desktop Portal) that you want to configure. "},{"title":"Confirm the App is not longer used​","type":1,"pageTitle":"Decom an Azure AD App","url":"/How-to Guides/Azure Active Directory/Decom an Azure AD App#confirm-the-app-is-not-longer-used","content":"Prevent access via the app to determine it is not being used, change the following Application settings using the Azure AD portal. Overview Page Enabled for users to sign-in? - Set this setting to NO. With this off, the application cannot be used. Users and Groups Page Remove all groups\\users (Screenshot them incase they need to be re-added). Permissions Page Remove all Admin and User consented permissions (Screenshot them incase they need to be re-added). "},{"title":"Delete the App from Azure AD​","type":1,"pageTitle":"Decom an Azure AD App","url":"/How-to Guides/Azure Active Directory/Decom an Azure AD App#delete-the-app-from-azure-ad","content":"From the Overview page, select Delete.Read the deletion consequences. Check the box if one appears at the bottom of the pane.Select Delete to confirm that you want to delete the app. "},{"title":"Restore VM from Snapshot","type":0,"sectionRef":"#","url":"/How-to Guides/Azure/Restore VM from Snapshot","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Step 1: Create a new Managed Disk​","type":1,"pageTitle":"Restore VM from Snapshot","url":"/How-to Guides/Azure/Restore VM from Snapshot#step-1-create-a-new-managed-disk","content":"Firstly we need to create a new managed disk from the snapshot taken, this is to then replace the disk on the VM we need to restore. In the search box, enter Disks, and then select Disks from the list.On the Disks page, select Create.Create the new disk based off of the current disk of the VM (In Source type, ensure the Snapshot is selected). "},{"title":"Step 2: Attach the new disk​","type":1,"pageTitle":"Restore VM from Snapshot","url":"/How-to Guides/Azure/Restore VM from Snapshot#step-2-attach-the-new-disk","content":"caution Confirm there's no public IP attached to this VM, this process will stop &amp; De-Allocate the VM in question. Find your VM in the Azure Portal.Select Disks.Click Swap OS Disk. "},{"title":"Step 3: Test the VM​","type":1,"pageTitle":"Restore VM from Snapshot","url":"/How-to Guides/Azure/Restore VM from Snapshot#step-3-test-the-vm","content":"Once you've attached the new disk. Check it boots correctly.Confirm apps are installed and run "},{"title":"Re-size a Virtual Machine","type":0,"sectionRef":"#","url":"/How-to Guides/Azure/Re-size a Virtual Machine","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Before you begin​","type":1,"pageTitle":"Re-size a Virtual Machine","url":"/How-to Guides/Azure/Re-size a Virtual Machine#before-you-begin","content":"Shutdown the VM from within it's OS if possible (Not always necessary at all but, nice to do).If you cannot see the VM size that you're looking for it may not be compatible with your VM. note You can have too many disk or NICs attached to the VM for the size you want. The type of disks that you have attached can limit your options, premium and standard tier. "},{"title":"Re-sizing the vm​","type":1,"pageTitle":"Re-size a Virtual Machine","url":"/How-to Guides/Azure/Re-size a Virtual Machine#re-sizing-the-vm","content":"De-allocating a VM can cause issues! De-allocating the VM also releases any dynamic IP addresses assigned to the VM. The OS and data disks are not affected. At the same time, you're releasing your ownership of the size of that VM. If you are resizing a production VM, consider using Azure Capacity Reservations to reserve Compute capacity in the region; otherwise you may have to pick another size. Open the Azure portal, https://portal.azure.com.Search for your virtual machine.In the left menu, Select Size.Choose the new size from the list of available sizes and then Select Resize. "},{"title":"Setup Azure Backup","type":0,"sectionRef":"#","url":"/How-to Guides/Azure/Setup Azure Backup","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Create the below resources in the FW-Azure Production subscription​","type":1,"pageTitle":"Setup Azure Backup","url":"/How-to Guides/Azure/Setup Azure Backup#create-the-below-resources-in-the-fw-azure-production-subscription","content":"info Use whatever naming conention fits in with what's being used already, I am just suggesting something here. Create the resource group, for example, rg-&lt;customername&gt;-&lt;region&gt;-&lt;prod/dev&gt;-backups-01.Create a recovery services vault to store the backups (GRS is the preferred option, LRS for lowest cost), for example, rsv-&lt;customername&gt;-&lt;region&gt;-&lt;prod/dev&gt;-backup-01.Create a log analytics workspace or reuse another one, for example, la-&lt;customername&gt;-&lt;region&gt;-&lt;prod/dev&gt;-backup-01. "},{"title":"Configure Backup Policy​","type":1,"pageTitle":"Setup Azure Backup","url":"/How-to Guides/Azure/Setup Azure Backup#configure-backup-policy","content":"Configure the backup policy in-line with whatever standard is being used already, my suggestions are below. In the Azure portal, select a Recovery Services vault to back up the VM.Under Backup, select Backup Policies.Click +Add.On Select policy type, select Azure Virtual Machine.On Create policy, perform the following actions: Policy sub type: StandardSuggested Name format: Bkup-policy-&lt;time of day&gt;-&lt;policy type&gt; (example name: bkup-policy-nightly-std).  "},{"title":"Configure Alerting​","type":1,"pageTitle":"Setup Azure Backup","url":"/How-to Guides/Azure/Setup Azure Backup#configure-alerting","content":"tip Note that this method is using the old backup alerting method, this is being replaced by Azure Monitor. Microsoft Link for more information Configure diagnostic logs to be sent from Azure Backup to the Log Anlytics workspace above. From the Recovery services vault just setup. Click on Backup Alerts, under the Monitoring section.Click Configure Notifications. Enable Notifications: YesRecipients(Email): monitoring@DomainName.comNotify: Hourly digestSeverity: Critical &amp; Warning Example of this below. "},{"title":"Configure Diagnostic log collection​","type":1,"pageTitle":"Setup Azure Backup","url":"/How-to Guides/Azure/Setup Azure Backup#configure-diagnostic-log-collection","content":"Configure diagnostic logs to be sent from Azure Backup to the Log Anlytics workspace above. Navigate to Diagnostic settings under Monitoring.Click Add Diagnostic Settings.Name your diagnostic setting, something informational, for example, &quot;AzBkup-Diagnostics&quot;, suggestion, Backup Report Data.Select Send to Log Analytics Workspace.Add a workspace and don't touch any other settings.Hit Save. tip Make sure to run the initial backup job from the Azure Backup Dashboard. "},{"title":"Restore data from a Snapshot","type":0,"sectionRef":"#","url":"/How-to Guides/Azure/Restore data from a Snapshot","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Create a new disk from a Snapshot​","type":1,"pageTitle":"Restore data from a Snapshot","url":"/How-to Guides/Azure/Restore data from a Snapshot#create-a-new-disk-from-a-snapshot","content":"Validate the Snapshot Make sure to check the SnapShot is valid before starting this process. I'm assuming that there's already a Snapshot ready to go. Open the Azure portal, https://portal.azure.com.Navigate to a VM that is available to have a disk attached to it.Click on Disks on the left-hand side.Create a new disk.Click Edit on the far right hand side. As shown in red above.Name your Disk, I'd suggest, snapshot_ServerName_Date_TimeSource, Select snapshot.Select the Snapshot you wish to attach.Make any changes to the Encryption Type.I'd suggest it not to be a shared disk.Press Save. This shouldn't take too long. "},{"title":"Error \"Host Caching is disabled...\"​","type":1,"pageTitle":"Restore data from a Snapshot","url":"/How-to Guides/Azure/Restore data from a Snapshot#error-host-caching-is-disabled","content":"If you see the error below, change the Host Caching option to &quot;none&quot;.  "},{"title":"Confirm disk is visibile in the OS​","type":1,"pageTitle":"Restore data from a Snapshot","url":"/How-to Guides/Azure/Restore data from a Snapshot#confirm-disk-is-visibile-in-the-os","content":"tip The share should be available from the get go however, you may need to bring the disk online within computer management. RDP into your VM &amp; check File Explorer for your disk, the name will be what the share was called originally.Open Computer Management, Click Disk Management.Right-Click on the disk, mark it as Oneline. You should now see it in File Explorer. "},{"title":"Detach the disk​","type":1,"pageTitle":"Restore data from a Snapshot","url":"/How-to Guides/Azure/Restore data from a Snapshot#detach-the-disk","content":"Close any open sessions to the disk that you attached.Navigate back to the VM in Azure Management Portal.Click the X button to the right-hand side of the disk. "},{"title":"Generating a CSR","type":0,"sectionRef":"#","url":"/How-to Guides/Certificates/Generating a CSR","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"What is a CSR?​","type":1,"pageTitle":"Generating a CSR","url":"/How-to Guides/Certificates/Generating a CSR#what-is-a-csr","content":"what does it stand for? CSR stands for Certificate signing request. The CSR contains information (e.g. common name, organization, country) the Certificate Authority (CA) will use to create your certificate. It also contains the public key that will be included in your certificate and is signed with the corresponding private key. "},{"title":"Creatine one (Windows IIS)​","type":1,"pageTitle":"Generating a CSR","url":"/How-to Guides/Certificates/Generating a CSR#creatine-one-windows-iis","content":"The most common method of generating or creating a CSR is via Internet Information Services (IIS), which is a microsoft product that runs on the Windows OS as part of a server installation. What other methods are there? There are lots of different methods to generate a CSR file, it depends on what operation system you're running. Try this link for more information. RDP or Login to a machine running IIS.Search for IIS in the start menu to find the app and open it.Click the Server Name.From the center menu double-click Server Certificates in the Security section.Select the Actions menu from the right. Click Create Certificate Request.The Request Certificate Wizard will appear. In the Distinguished Name Properties window enter information as prompted. Click Next. Mandatory information You must fill the Common Name in with the domain that you wish to cover with the certificate. If you wanted to create a certificate for &quot;www.finepies.com&quot;, that is what must be in the Common Name field. In the Cryptographic Service Provider Properties window leave the top field as Microsoft RSA SChannel Cryptographic Provider. Make sure the minimum Bit length is set ot 2048 or higher.Click Next.Save the text file someone easy to find and you're done. Take the CSR file to your certificate authority, internal or externally hosted and upload your CSR, you'll get a certificate back again. "},{"title":"Final steps​","type":1,"pageTitle":"Generating a CSR","url":"/How-to Guides/Certificates/Generating a CSR#final-steps","content":"Depending on what you want to use the certificate for, you may need to &quot;complete&quot; the certificate. Access IIS again.From the center menu double-click Server Certificates in the Security section.Click Complete Certificate Request.Complete the Wizard and it will have imported the certificate into the store you selected. You'll now be able to export the certificate and the private key should you need to. "},{"title":"Perform an AutoPilot Reset","type":0,"sectionRef":"#","url":"/How-to Guides/Intune/Perform an AutoPilot Reset","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Before you start​","type":1,"pageTitle":"Perform an AutoPilot Reset","url":"/How-to Guides/Intune/Perform an AutoPilot Reset#before-you-start","content":"info Ignore this step if you know you do not use group tags. Confirm the device has the correct group tag Sometimes group tags within Autopilot are used to assign device profiles\\policies after the device has been enrolled. This group tag must be correct if you're using them otherwise, it'll interfer with the reset process. Login to Microsoft Endpoint Manager, https://endpoint.microsoft.com/.Click Devices &gt; Windows &gt; Windows Enrollment &gt; Devices.Find the Serial number of the device and search it here.Click on your device, alter group tag** here to the correct one.Click Save caution Wait for the profile status to change to assigned before progressing, this is automatic and in my experience can take up to 30 minutes. "},{"title":"Initiate the reset​","type":1,"pageTitle":"Perform an AutoPilot Reset","url":"/How-to Guides/Intune/Perform an AutoPilot Reset#initiate-the-reset","content":"tip The Windows device MUST have a stable internet connection to complete this process. Login to Microsoft Endpoint Manager, https://endpoint.microsoft.com/.Click Devices &gt; Windows &gt; Windows Devices, it should already be on this option.Search for your device and click on the device name.Click the Autopilot Reset option.Click Yes. "},{"title":"On the device​","type":1,"pageTitle":"Perform an AutoPilot Reset","url":"/How-to Guides/Intune/Perform an AutoPilot Reset#on-the-device","content":"Make sure the machine is powered on and connected to an internet source.The Autopilot process should start automatically.When the option appears, select Windows Autopilot provisioning. Autopilot should take over from here and reset the device. Once the above completes you should then be returned to a normal looking Windows login prompt. "},{"title":"Deploy Google Play store app","type":0,"sectionRef":"#","url":"/How-to Guides/Intune/Deploy Google Play store app","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Add the App into Intune​","type":1,"pageTitle":"Deploy Google Play store app","url":"/How-to Guides/Intune/Deploy Google Play store app#add-the-app-into-intune","content":"Login to https://endpoint.microsoft.com/Navigate to Apps &gt; Android &gt; Add App (Click the plus icon).Select the Managed Google Play app from the list.Search the app store.Find and select the app.Click Approve.Accept the agreement for what the application will have access to on the deice.For the next screen select one of the two options presented to you. For quality of life for your users, I'd select the top option &quot;Keep approved when app requests new permissions.&quot;  Click Sync in the top left corner of the screen. Go back the list of Android apps and you should see the new app appear shortly. "},{"title":"Creating a dynamic group to include only company owned android devices.​","type":1,"pageTitle":"Deploy Google Play store app","url":"/How-to Guides/Intune/Deploy Google Play store app#creating-a-dynamic-group-to-include-only-company-owned-android-devices","content":"Login to, https://aad.portal.azure.com.Click on Azure Active Directory.Click Groups.Click New Group.Fill in the information, make sure to select Dynamic Device option under membership type. Click Add dynamic query at the bottom.Add the two queries below to check the OS device type and the device ownership properties. deviceOSType Equals AndroidEnterprise.deviceOwnership Equals Company.  "},{"title":"Request Cert from internal CA","type":0,"sectionRef":"#","url":"/How-to Guides/Certificates/Request Cert from internal CA","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Generating a CSR​","type":1,"pageTitle":"Request Cert from internal CA","url":"/How-to Guides/Certificates/Request Cert from internal CA#generating-a-csr","content":"Generate a CSR from another server, doing this from IIS is a tried and tested method. To see how to do this, there's a reference guide here, Generating a CSR. "},{"title":"Submitting the request to the CA​","type":1,"pageTitle":"Request Cert from internal CA","url":"/How-to Guides/Certificates/Request Cert from internal CA#submitting-the-request-to-the-ca","content":"Open a web browser.Browse to your Certificate Authority website. Certificate Authority website URL Enter the address of your CA followed by /certsrv for example http://ca server name/certsrv in the Address bar. Click Request a certificate Click submit an advanced certificate request. Paste in the CSR. Certificate template Make sure to change the template you want to use if that is applicable. Click submit. "},{"title":"Completing the Request​","type":1,"pageTitle":"Request Cert from internal CA","url":"/How-to Guides/Certificates/Request Cert from internal CA#completing-the-request","content":"Your certificate should be approved almost instantly and some download options will appear. Select whatever download option is best for you; I'd suggest renaming the certificate file you download, it'll have a generic name otherwise.  tip The chain option downloads the Certificate Authority certs (Root and Sub-CAs in the chain) as well, all the way back to the root ca. "},{"title":"AVD Image Update Guidance","type":0,"sectionRef":"#","url":"/How-to Guides/Azure/AVD Image Update Guidance","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Terms​","type":1,"pageTitle":"AVD Image Update Guidance","url":"/How-to Guides/Azure/AVD Image Update Guidance#terms","content":"Session Host, these are the Virtual Machines that are assigned as the Session Hosts in the Azure Virtual Desktop solution.Image, simply put, this is a stateful or point-in-time capture of a Virtual machine that will be used as a base for the new Session Hosts. "},{"title":"High level Overview​","type":1,"pageTitle":"AVD Image Update Guidance","url":"/How-to Guides/Azure/AVD Image Update Guidance#high-level-overview","content":"This document covers a Shared Image Gallary deployment approach. There are other options for the deployment of VMs as Session Hosts, you can find out more information here, Operating systems and licenses | Microsoft doc. Snapshot a current Session Host.Create a new Virtual Machine from that Snapshot.Make any changes to that new Virtual Machine.Capture an image from the new Virtual Machine just created.Add the new image to the Shared image Gallery in Azure.Create a new session host using the new image.Test.Replace the currently deployed Session Hosts with new Hosts generated from that new image.Decom the old Session Hosts. "},{"title":"Considerations​","type":1,"pageTitle":"AVD Image Update Guidance","url":"/How-to Guides/Azure/AVD Image Update Guidance#considerations","content":"New Session hosts conflicing with current session hosts, if you're domain joining the Session Hosts, the new Virtual Machine you create as the template will need to be offline save conflicting with the current session host.Consider your networking options based off of the point above, do you need a new V-Net or, an NSG to allow RDP into the Virtual Machine.Backups &amp; Disaster Recovery plan, if you're backing up the session hosts (which isn't necessary if you're deploying an image that is region redundant) will you need to factor this into the new session hosts you're going to create.Patching and Log Anaylytics collection, when creating the new host, you'll need to validate that it's being patched, as well as check the Log Analytics workspace is collecting logs. "},{"title":"Long Version​","type":1,"pageTitle":"AVD Image Update Guidance","url":"/How-to Guides/Azure/AVD Image Update Guidance#long-version","content":"info This is my suggested process based off of the Microsoft documentation linked above, there are small variations on this guidance all over the place. "},{"title":"Creating a new Image​","type":1,"pageTitle":"AVD Image Update Guidance","url":"/How-to Guides/Azure/AVD Image Update Guidance#creating-a-new-image","content":"Arrange for some downtime of one of the session hosts, during the downtime do the following: - tip I'd suggest enabling drain mode before the downtime, just to ensure no-one logs in just before you shut it down. You can do that by selecting the session host and clicking &quot;Turn on Drain mode&quot; at the top or you can click the 3 dots on the right and click the same option. Shutdown a session host.Take a SnapShot of the OS disk.Power it back up again. Make sure that the session host is offering it's services as normal. Creating a new Virtual Machine from the Snapshot​ caution This process with stop &amp; De-Allocate the Virtual Machine in question In the search box, enter Disks, and then select Disks from the list.On the Disks page, select Create.Create the new disk based off of the information configuration of the current disk of the session host Virtual Machine. In Source type, ensure the Snapshot is selected. Attach the disks to the Virtual Machine through the portal ().Go to the Virtual Machine on the portal, Select Disks.Click Swap OS Disk.Boot the Virtual Machine. tip Check the new Virtual Machine boots Windows correctly, then you need to confirm the installed applications are present and will load. RDP into your new Virtual Machine and make your changes.Take another SnapShot of the Virtual Machine post making your changes.Run Sysprep. (C:\\Windows\\System32\\Sysprep\\sysprep.exe). Make sure to select Generalize and to set the Shutdown Option to Shutdown). Make sure the Virtual Machine is de-allocated and select Capture in the Azure portal.Upload the image to the shared image gallery. "},{"title":"Add a new Session Host​","type":1,"pageTitle":"AVD Image Update Guidance","url":"/How-to Guides/Azure/AVD Image Update Guidance#add-a-new-session-host","content":"In the Azure Portal, locate the Azure Virtual Desktop Portal\\Blade.Click on Host Pools.Select your Host Pool.Click on Session Hosts.Click + Add. info It may ask you to generate a key, click on the banner that appears and follow this through and download the new key. This will not affect the other session hosts that are already setup. Leave the Basics tab as is, the settings will be greyed out.On the Virtual Machines tab, fill in the various bits of information required.Add any Tags required.Click Review + Create to review the settings.Put the new Session Host into Drain mode, to stop users logging into it if you want to test the server\\image and Apps. tip I would suggest putting your new Session Host into Drain mode, save users logging into this server. See the next section regarding testing out the new Session Host and Image. A new Session Host should now appear in the list of servers. "},{"title":"Testing the deployment​","type":1,"pageTitle":"AVD Image Update Guidance","url":"/How-to Guides/Azure/AVD Image Update Guidance#testing-the-deployment","content":"tip I'd suggest doing the below out of business hours. Depending on whether or not you are using RDP sessions of Apps deployed from the RDSH servers. Confirm your session host is in the correct Host Pool and is service apps.Place the other Session Hosts into Drain mode to stop new connections.Turn off Drain mode on your new host.Test accessing resources.Get someone else to confirm it's all working, application owners for example. "},{"title":"Tidying up the old Hosts​","type":1,"pageTitle":"AVD Image Update Guidance","url":"/How-to Guides/Azure/AVD Image Update Guidance#tidying-up-the-old-hosts","content":"The AVD image update process requires that you decommission your previous Session Hosts and replace them completely with new Virtual Machines.Provided testing has been successful, you want to replace your hosts with the old image with the new ones by creating Session Hosts from the new image and then removing the hold hosts from the host pool.The old servers will need to be decommissioned but, can remain in Azure if you stop and de-allocate them at a minimal cost. Retain the old hosts Retaining the old Session Hosts could be your backup option as part of your change. "},{"title":"Device Troubleshooting","type":0,"sectionRef":"#","url":"/References/Intune/Device Troubleshooting","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Find policies\\settings applied to a device​","type":1,"pageTitle":"Device Troubleshooting","url":"/References/Intune/Device Troubleshooting#find-policiessettings-applied-to-a-device","content":"Open the Settings App from the start menu.Click Accounts.Selet Access work or School.Click on the company or account name that is your business or school account.Click Info. From here you can view the policies and applications that are applied and managed by your company, as well as run a Sync with your MDM platform. "},{"title":"Grant Partner Access to Azure Sub","type":0,"sectionRef":"#","url":"/References/Partner access to Az Sub","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Document Control​","type":1,"pageTitle":"Grant Partner Access to Azure Sub","url":"/References/Partner access to Az Sub#document-control","content":"Created: xLast Updated: 2023/03/30 Microsoft Article: Reinstate admin privileges for a customer's Azure CSP subscriptions. # Connect to Sub. Connect-AzAccount -TenantID &quot;&lt;Customer TenantID&gt;&quot; # Set the subscription context you want to add partner permissions too. Set-AzContext -SubscriptionID &quot;&lt;Customer Subscription ID&gt;&quot; # Assign the &quot;adminagents&quot; group in Partner tenant to the customer subscription New-AzRoleAssignment -ObjectID &quot;&lt;Object ID of the AdminAgents group from step 7 of your actions section&gt;&quot; -RoleDefinitionName &quot;Owner&quot; -Scope &quot;/subscriptions/&lt;CSP subscription ID&gt;&quot; -ObjectType &quot;ForeignGroup&quot;  "},{"title":"Renew Apple Tokens and Certs","type":0,"sectionRef":"#","url":"/How-to Guides/Intune/Renew Apple Tokens and Certs","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Apple MDM (Mobile Device Management) certificate​","type":1,"pageTitle":"Renew Apple Tokens and Certs","url":"/How-to Guides/Intune/Renew Apple Tokens and Certs#apple-mdm-mobile-device-management-certificate","content":""},{"title":"What is it?​","type":1,"pageTitle":"Renew Apple Tokens and Certs","url":"/How-to Guides/Intune/Renew Apple Tokens and Certs#what-is-it","content":"The MDM push certificate is associated with the Apple ID you used to create it. The Certificate is used to enrol and manage your IOS devices in your tenant. "},{"title":"Replacement steps​","type":1,"pageTitle":"Renew Apple Tokens and Certs","url":"/How-to Guides/Intune/Renew Apple Tokens and Certs#replacement-steps","content":"caution Do not let this expire, if it does expire you may have to re-enrol deviecs again. Login to https://admin.microsoft.com, navigate to the Intune portal.Go to Devices &gt; Enroll Devices &gt; Apple enrollment &gt; Apple MDM Push Certificates.Fill out the information in the window that pops out from the right. Follow the onscreen instructions. Remember to sign into the Apple Push Certificates Portal with the Apple ID you used to create your original certificate.Within the Apple Push Certificates Portal, click Renew on the old certificate. You can create a new Certificate; however, this requires further steps outlined in the following Microsoft link. Upload the new CSR you just created.After you renew and download the certificate, return to Intune to complete the remaining steps on this screen.Select Upload. "},{"title":"Enrollment program token​","type":1,"pageTitle":"Renew Apple Tokens and Certs","url":"/How-to Guides/Intune/Renew Apple Tokens and Certs#enrollment-program-token","content":"Login to Office 365, navigate to the Intune portal.Go to Devices &gt; Enroll Devices &gt; Apple enrollment &gt;Enrollment program tokens.Select the token that you want to renew.Select Renew token at the top.Sign-into Apple Business Manager with the account shown on the token.Click your name in the bottom left of the screen.Under &quot;Your MDM Servers&quot; select the relevant server.Click download at the top in the right-hand half of the page. Return to Intune portal.Upload the VPP token using the provided option.Select, Next then Review + Save. "},{"title":"VPP (Volume Purchase Program) token(s)​","type":1,"pageTitle":"Renew Apple Tokens and Certs","url":"/How-to Guides/Intune/Renew Apple Tokens and Certs#vpp-volume-purchase-program-tokens","content":"Login to Office 365, navigate to the Intune portal.Go to Tenant settings &gt; Connectors and tokens &gt; Apple VPP Tokens.Click on the token you want to renew.Click the Edit button next to the basics section.Sign into Apple Business Manager with the account you used to set this up originally.Click your name in the bottom left &gt; Payments and Billing.Scroll down to the Server Tokens section.Click download next to your token name, it should match the organisation in your Intune tenant.Back in Intune, upload the VPP token using the provided option.Select Save. "},{"title":"Testing​","type":1,"pageTitle":"Renew Apple Tokens and Certs","url":"/How-to Guides/Intune/Renew Apple Tokens and Certs#testing","content":"Notify the customer that the above has been updated successfully. The customer should confirm they can enroll new devices into Intune, download and assign apps to the devices. "},{"title":"Citrix Image Update Guidance","type":0,"sectionRef":"#","url":"/How-to Guides/Citrix Cloud/Citrix Image Update Guidance","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Before you begin​","type":1,"pageTitle":"Citrix Image Update Guidance","url":"/How-to Guides/Citrix Cloud/Citrix Image Update Guidance#before-you-begin","content":"Gather up the updates that are needed to be applied to the Citrix image including: - Required Windows Security and Feature updates.Application Updates and changes.OS changes (That are not deploying via policy) Once you have your updates, liaise with your team or IT contact to arrange a change window with them, as the customer will want to test the update themselves first before they're rolled out to production. Change Window A good rule of thumb that's done me well, is to complete an image update over a 2 week period. The 1st week for rolling it out the test environment &amp; the 2nd week would be to deploy to the production environment. "},{"title":"Deploy changes to the test environment​","type":1,"pageTitle":"Citrix Image Update Guidance","url":"/How-to Guides/Citrix Cloud/Citrix Image Update Guidance#deploy-changes-to-the-test-environment","content":"Locate the production template VM. "},{"title":"Snapshot the VM​","type":1,"pageTitle":"Citrix Image Update Guidance","url":"/How-to Guides/Citrix Cloud/Citrix Image Update Guidance#snapshot-the-vm","content":"Locate the VM resource; search for it or follow the image below. Click Disks.Select the OS disk. Create Snapshot. Name the Snapshot appropriately, &quot;VMName-Before-&quot;insert update description here&quot;-dd-mm-yyyy-hh-hh&quot;. "},{"title":"Make any changes to the VM​","type":1,"pageTitle":"Citrix Image Update Guidance","url":"/How-to Guides/Citrix Cloud/Citrix Image Update Guidance#make-any-changes-to-the-vm","content":"You should now remote into the VM and make any changes that you need to.Follow steps from the above section to take another Snapshot.Name it appropriately, &quot;VMName-prod-After-&quot;insert update description here&quot;-dd-mm-yyyy-hh-hh&quot;.Power off the template VM, you no longer need it running. "},{"title":"Update the test Citrix Image​","type":1,"pageTitle":"Citrix Image Update Guidance","url":"/How-to Guides/Citrix Cloud/Citrix Image Update Guidance#update-the-test-citrix-image","content":"Access Citrix Cloud, https://citrix.cloud.com/.Click Manage under &quot;DaaS Standard for Azure&quot;. Select Manage in the top left and click Full Configuration. Select Machine Catalogs. Select the testing Catalogue, named &quot;Your Catalogue Name&quot;. Above the list of Catalogues,select Change Master Image. Click Next on the wizard to step 2.Select an image from the options available. (It points to the resource group where the template VM resides). Add a note under this to describe the updates that have been made. Make the note descriptive to explain what has been changed.Select the minimum functional level as required. Example of the Master Image page Press Next.Leave the roll out strategy as On next shutdown unless you need to change this.Complete the wizard to complete this process. "},{"title":"Deploy changes to the production environment​","type":1,"pageTitle":"Citrix Image Update Guidance","url":"/How-to Guides/Citrix Cloud/Citrix Image Update Guidance#deploy-changes-to-the-production-environment","content":""},{"title":"Update the master Image​","type":1,"pageTitle":"Citrix Image Update Guidance","url":"/How-to Guides/Citrix Cloud/Citrix Image Update Guidance#update-the-master-image","content":"Access Citrix Cloud, https://citrix.cloud.com/ and then follow the steps from the section above this, to update the master image of your production Machine Catalog. "},{"title":"Setup an Azure Subscription from Partner Centre","type":0,"sectionRef":"#","url":"/How-to Guides/Partner Centre/Setup an Azure Subscription from Partner Centre","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Before you begin​","type":1,"pageTitle":"Setup an Azure Subscription from Partner Centre","url":"/How-to Guides/Partner Centre/Setup an Azure Subscription from Partner Centre#before-you-begin","content":"Who'll manage this subscription? If it's being setup with the CSP, it'll automatically be owned by the CSP. Who'll be supporting this subscription? Will it be added to BAU.What Groups and\\or accounts need to manage it, (Owner, Contributor, Reader). "},{"title":"Setup Guidance​","type":1,"pageTitle":"Setup an Azure Subscription from Partner Centre","url":"/How-to Guides/Partner Centre/Setup an Azure Subscription from Partner Centre#setup-guidance","content":"Create a Subscription for Partners | Microsoft Doc Link. "},{"title":"Access the Billing Blade​","type":1,"pageTitle":"Setup an Azure Subscription from Partner Centre","url":"/How-to Guides/Partner Centre/Setup an Azure Subscription from Partner Centre#access-the-billing-blade","content":"Sign in to the Azure portal using your Partner Center account.Make sure you are in your Partner Center directory (tenant), not a customer’s tenant.Navigate to Cost Management + Billing.Select the Billing scope for your billing account where the customer account resides.In the left menu under Billing, select Customers.On the Customers page, select the customer. If you have only one customer, the selection is unavailable.In the left menu, under Products + services, select All billing subscriptions.On the Azure subscription page, select + Add to create a subscription. "},{"title":"Creating the new Subscription​","type":1,"pageTitle":"Setup an Azure Subscription from Partner Centre","url":"/How-to Guides/Partner Centre/Setup an Azure Subscription from Partner Centre#creating-the-new-subscription","content":"Then select the type of subscription to add. For example, Usage based/ Azure subscription.On the Basics tab, enter a subscription name.Select the partner's billing account.Select the partner's billing profile.Select the customer that you're creating the subscription for and, if applicable, select a reseller.Next to Plan, select Microsoft Azure Plan** for DevTest, if the subscription will be used for development or testing workloads. Otherwise, select Microsoft Azure Plan.Optionally, select the Tags tab and then enter tag pairs for Name and Value.Select Review + create. You should see a message stating Validation passed.Verify that the subscription information is correct, then select Create. You'll see a notification that the subscription is getting created. The customer will see the new subscription appear for them within 60 minutes, they may need to amend the subscription filter to see the new sub. User complains they do not have access If the end user you're testing with is not in the root managemnt group, you'll need to grant them a role over the Subscription before they can see it. "},{"title":"Setup Azure Site Recovery","type":0,"sectionRef":"#","url":"/How-to Guides/Azure/Setup Azure Site Recovery","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"High Level Overview of tasks​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#high-level-overview-of-tasks","content":"Create Recovery Vault and Resource Group.Setup replication for the resources needing it.Confirm Network information of each VM.Allow the initial Syynchronisation to run.Setup a Recovery Plan.Run a Test Failover. "},{"title":"Descisions to make before beginning​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#descisions-to-make-before-beginning","content":"These are expanded upon throughout the guide. Naming Conventions.Regions to be used.Networking (Create them manually or let ASR do this for you.)Regional vCPU and VM Series Quotas. "},{"title":"Naming Conventions​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#naming-conventions","content":"The resources cannot be renamed after they've been created, decide ahead of time what your naming convention will be, examples are below. Recover Services Vault – Customer or Domain Name – East US – Azure Site Recovery rsv-cust-eus-asr Resource Group – Customer or Domain Name – East US – Azure Site Recovery rg-cust-eus-asr "},{"title":"Regions​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#regions","content":"Some Azure services rely upon regional pairs by default, such as Azure redundant storage; review this Microsoft document for the pairs for consideration. For example, the primary region for you maybe UK South(London), this region is paired with UK West(Cardiff). "},{"title":"Networking​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#networking","content":"VNETs​ When you initially setup a VM replica, the ASR wizard can create the vnet and all subnets within that vnet automatically. You don't have to use the wizard though, and you can pre-create the replica vnets and subnets via the Azure Portal or PowerShell. Creating your own VNETs The added bonus of doing this yourself means you can create your own naming convention, by default, ASR will setup the VNET with the same name but with the -asr appended to the end of it. Network Security Groups​ NSGs (Network Security Groups) are not automatically replicated over through ASR, you'll have to recreate these yourself. You can use a script to export the rules from them, you can them &quot;import&quot; the rules back into your newly created ones. Public IPs​ These also have to be pre-configured and possibly re-assigned after the VMs have been failed over. "},{"title":"Regional vCPU and VM Series Quotas​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#regional-vcpu-and-vm-series-quotas","content":"A common issue with replication can be restricted quota limits for VM sizes in other Azure regions. The VM family vCPU quotas often need to be increased prior to replication. The replication process will start but will give an error regarding vCPU quotas and eventually fail. Request a quota increase To request a CPU quota increase - Quotas -&gt; Compute -&gt; Filter to the region UK West -&gt; Select VM family size and click the pencil edit button on the right. Then request increase. "},{"title":"Setup Guidance​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#setup-guidance","content":""},{"title":"Create Recovery Vault and Resource Group​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#create-recovery-vault-and-resource-group","content":"Resource Regions Make sure to setup the Resource Group and the Recovery Service Vault in the region you want to replicate the resources too or your secondary region. Login to the Azure Portal, https://portal.azure.com.Search for Recovery Service Vaults.Create the new resources. Create a new Resource Group, using the naming convention mentioned in this section.Create a new Recovery Service Vault, using the naming convention mentioned in this section.Select the Region that matches the pairings in this Microsoft document. That's the resources setup. "},{"title":"Add Resources for ASR​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#add-resources-for-asr","content":"Step 5, Selecting your Source Information This option seems to be incredibly glitchy for no reason from my experience. You may have to back out of the setup and start over from step 1 if you cannot see your VMs as expected. Also make sure your source region is correct otherwise you'll see nothing. Navigate to your new Recovery Services Vault.Find and select Replicated Items from the list on the left.Click + Replicate.Select Azure virtual machines. Select the source information for where the resource is sitting already. Region: This should be your original or source regionSubscription: Select the Subscription where your resources are currently.Resource Group: Select the Resource Goup where your resources are currently.Virtual machine deployment model: Resource Manager.Disaster recovery between availability zones?: It's greyed out for me, I'm assuming you're not using that! Press Next.Select your VMs from the list.Press Next.Select the Target location information. (The term new and -asr, is appended to any resource created here.)Make sure to select the correct subnet, Azure will default to the first subnet in the VNET. Check the dropdown menu to ensure the vnet hasn’t been created previously (GUI bug). Click View/edit storage configuration to check the destination disk type is Standard HDD. Click Replica Managed Disk and select Standard HDD to reduce ASR costs. Save and Press Next to get to the Manage tab.For Extension Settings, select Allow ASR to manage. The wizard will attempt to create an automation account which automatically updates the ASR agents. This process does not always succeed, but does not stop ASR from working. See this section for the fix to this issue. Click Enable Replication. This process can take 10 - 15 minutes to complete however, the initial synchronisation of the VMs over to the secondary region will take considerably longer, perhaps to run over night. "},{"title":"Check Failover Health​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#check-failover-health","content":"Navigate to your new Recovery Services Vault.Find and select Replicated Items from the list on the left. Within this window you'll see the replicated resources and the Failover Health. "},{"title":"Set the Network info for replicated items​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#set-the-network-info-for-replicated-items","content":"info You can only complete this step once the initial sync has completed. To confirm this, you can check the status of the items using the instructions in the section above here. Each VM you're replicating needs to have the networking information confirmed on them for the replicated region. Navigate to a VM that's been setup for ASR.Find Disaster Recovery on the left hand side and select this.Click Network on the left hand side.Select Edit.Find the section labelled, Primary IP Configuration. Make sure to set the make sure to confirm Private IP address and the Public IP address if needed. "},{"title":"Setup Recovery Plan​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#setup-recovery-plan","content":"The recovery plan allows you to perform a failover or failover test with multiple machines. Navigate to your Recovery Services vault.Select Recovery Plans (Site Recovery).Click +Recovery Plan.In Create recovery plan, specify a name for the plan.Choose a source and target based on the machines in the plan, and select Resource Manager for the deployment model. The source location must have machines that are enabled for failover and recovery. "},{"title":"Running a Test Failover​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#running-a-test-failover","content":"Test Failover will create the VM resources in the secondary region without shutting down or impacting the production resources in your primary region. You'll see duplicate VMs with -test appended to the end of them. "},{"title":"Start the test​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#start-the-test","content":"Navigate to your Recovery Services vault.Select Recovery Plans (Site Recovery).Click on the relevant Recovery Plan.Click Test Failover.Choose the recovery point and the VNET target.Click OK. Whilst the test is running, you can select the running job in the Notifications menu, it will show you the progress within the Recovery Plan. Once the plan completes you'll see the deplucate resources in your Azure Portal.  "},{"title":"End the Test & Cleanup Resources​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#end-the-test--cleanup-resources","content":"Navigate to your Recovery Services vault.Select Recovery Plans (Site Recovery).Find the Recovery Plan you just initiated.Select the 3 dots on the right hand side.Click Cleanup test failover.Add any Notes for the test.Tick the box for Testing is complete. Delete test failover virtual machine(s).Click OK. info Once you click OK you will be stuck on the page until the task completes, I would suggest not exiting the page until it is finished. Again you can watch the operation complete from the Notifications menu. "},{"title":"Issues​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#issues","content":""},{"title":"Automation Accounts error​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#automation-accounts-error","content":"If the ASR automation account fails to create, which is often the case, you can fix this by forcing creation within the Recovery Service Vault page. From the Recovery Services vault.Click Site Recovery Infrastructure.Click Extension Update Settings.Select Allow Site Recovery to manage.Select On.Click Save. This will attempt to fix the automation account. "},{"title":"Stale resource links on the VM.​","type":1,"pageTitle":"Setup Azure Site Recovery","url":"/How-to Guides/Azure/Setup Azure Site Recovery#stale-resource-links-on-the-vm","content":"Full Error: - The cleanup of the stale ASR resource links on the VM failed due to one of the below reasons. The resource or the resource group has 'Delete' locks or 'ReadOnly' locks and deletion of resource links failed. Azure error messages: Azure status code: Conflict. Arm error code: ScopeLocked. Replication not enabled on VM with stale resources (error code 150226) | Microsoft doc link  Make sure to remove any delete locks on resources before you remove the resource from replication protection, otherwise you'll end up with issues noted in the above link. "},{"title":"Certificate Formats and Conversions","type":0,"sectionRef":"#","url":"/How-to Guides/Certificates/Certificate Formats and Conversions","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Certificate Formats​","type":1,"pageTitle":"Certificate Formats and Conversions","url":"/How-to Guides/Certificates/Certificate Formats and Conversions#certificate-formats","content":"All you need to know is that there are several file extension types and encoding formats. Plus, in order to successfully install an SSL on your server, you need to know which type exactly your server or device requires. "},{"title":"X.509 certificate encoding formats and extensions​","type":1,"pageTitle":"Certificate Formats and Conversions","url":"/How-to Guides/Certificates/Certificate Formats and Conversions#x509-certificate-encoding-formats-and-extensions","content":".pem, .crt, .ca-bundle, .cer, .p7b, .p7s files contain one or more X.509 digital certificate files that use base64 (ASCII) encoding. You get one of those in a zip file. You may also encounter *.pfx files. This is an archive file format for storing several cryptographic objects in a single file. In the scope of SSL certificates for SSL/TLS client and SSL/TLS web server authentication, a .pfx file must contain the end-entity certificate (issued for your domain), a matching private key, and may optionally include an intermediate certification authority (a.k.a. a CA Bundle). All this is wrapped up in a single file which is then protected with a pfx password. A Private key must be kept secret and is something that you generate alongside with the certificate signing request (CSR) by using an available tool. PEM (Base64 (ASCII))​ A PEM file is a text format, the pem file contains the certificates inforamtion in a Hash format, which can be placed into an application. .pem.crt.ca-bundle You can decode the Hash using a tool such as this online one, paste the text into the tool for it to show you the information. https://www.sslshopper.com/certificate-decoder.html  You can also do this using OpenSSL from your computer with the command openssl x509 -in certificate.crt -text -noout PKCS#7 (Base64 (ASCII))​ Are mostly used in Windows or Java-based server environments (e.g. Internet Information Server (IIS), MS Exchange server, Java Tomcat, etc). PKCS#7 certificate file includes the end-entity certificate (the one issued to your domain name), plus one or more trusted intermediate certification authority files. .p7b.p7s DER (Binary)​ .der.cer These files are very often used for Microsoft IIS services. PKCS#12 (Binary)​ .pfx.p12 "},{"title":"Convertion to different formats​","type":1,"pageTitle":"Certificate Formats and Conversions","url":"/How-to Guides/Certificates/Certificate Formats and Conversions#convertion-to-different-formats","content":""},{"title":"Open SSL​","type":1,"pageTitle":"Certificate Formats and Conversions","url":"/How-to Guides/Certificates/Certificate Formats and Conversions#open-ssl","content":"Installing Open SSL​ Install Chocolatey (Package Manager), Link to document . "},{"title":"Using Open SSL​","type":1,"pageTitle":"Certificate Formats and Conversions","url":"/How-to Guides/Certificates/Certificate Formats and Conversions#using-open-ssl","content":"Before you begin​ Create a folder and place the pfx file into the folder.To load openssl, open cmd as admin, navigate to “C:\\Program Files\\OpenSSL-Win64”, run the start.bat file to launch openssl.Change to the folder containing the pfx file and run the following commands. PFX file with separate key file​ Follow the guidance in the above section before proceeding. Type the following commands into your admin command prompt. openssl pkcs12 -in nameofyourcertificate.pfx -nocerts -nodes -out privatekey.keyopenssl pkcs12 -in nameofyourcertificate.pfx -clcerts -nokeys -out certificate.cer This will create a privatekey.key file (containing the private keys) and certificate.cer (containing the certificate). PFX to PEM with Private Key File​ Stack OverFlow link. Follow the guidance in the Before you begin section above before proceeding. To convert a PFX file to a PEM file that contains both the certificate and private key (you'll need the private key for the PFX file to do this). openssl pkcs12 -in filename.pfx -out cert.pem -nodes To convert a PFX file to separate public and private key PEM files (you'll need the private key for the PFX file to do this): Extracts the private key form a PFX to a PEM file: openssl pkcs12 -in filename.pfx -nocerts -out key.pem Exports the certificate (includes the public key only): openssl pkcs12 -in filename.pfx -clcerts -nokeys -out cert.pem Removes the password (paraphrase) from the extracted private key (optional): openssl rsa -in key.pem -out server.key "},{"title":"Reset BitLocker PIN or Password","type":0,"sectionRef":"#","url":"/How-to Guides/Windows/Reset BitLocker PIN or Password","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Change/Reset in File Explorer​","type":1,"pageTitle":"Reset BitLocker PIN or Password","url":"/How-to Guides/Windows/Reset BitLocker PIN or Password#changereset--in-file-explorer","content":"Open File Explorer.Find This PC on teh left hdn side of the window.Right-click on the drive encrypted with BitLocker.Select Change BitLocker PIN.Enter the old password, then enter the new password twice, click Change PIN. tip If you have forgotten your startup PIN, just click the &quot;Reset a Forgotten PIN&quot; link below. It allows you to set a new password without asking for the current PIN. "},{"title":"Change/Reset in Control Panel​","type":1,"pageTitle":"Reset BitLocker PIN or Password","url":"/How-to Guides/Windows/Reset BitLocker PIN or Password#changereset-in-control-panel","content":"Click on the Start Menu.In the search box, type Manage BitLocker and open this..Click Change password for the desired drive.Enter the old password, then enter the new password twice. When done, click Change password. tip If you have forgotten your BitLocker Password, just click the &quot;Reset Forgot Password&quot; link below. It allows you to set a new password without asking for the current password. "},{"title":"Change/Reset in Command Prompt​","type":1,"pageTitle":"Reset BitLocker PIN or Password","url":"/How-to Guides/Windows/Reset BitLocker PIN or Password#changereset-in-command-prompt","content":"From the start menu, search for cmd.Open Command Prompt as an Administrator. To change the BitLocker PIN, enter the following command Manage-bde -changepin C:.To change the BitLocker password, use the following command manage-bde -changepassword &lt;drive letter&gt;. tip If your Windows partition is not C:\\, use the drive letter that is appropriate for your system. If you don't know what this is, look in File Explorer. Type the new PIN when prompted, and press Enter. Confirm the new PIN by typing it again when prompted, and press Enter.  You won't see the password as you type it For security reasons, the new PIN you type will become invisible. "},{"title":"SharePoint Admin Tasks","type":0,"sectionRef":"#","url":"/How-to Guides/SharePoint Online/SharePoint Admin Tasks","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Site Permissions​","type":1,"pageTitle":"SharePoint Admin Tasks","url":"/How-to Guides/SharePoint Online/SharePoint Admin Tasks#site-permissions","content":""},{"title":"Adding and Removing users​","type":1,"pageTitle":"SharePoint Admin Tasks","url":"/How-to Guides/SharePoint Online/SharePoint Admin Tasks#adding-and-removing-users","content":"Go to Active sites in the new SharePoint admin center, and sign in with an account that has admin permissions for your organization.To open the details pane, select the site name.Select the Permissions tab. From here you can manage your site admins and owners. Members and Visitor rights These permissions must be managed from either the group linked to the SharePoint site or within the site itself once you're an owner or admin. "},{"title":"Change a site address​","type":1,"pageTitle":"SharePoint Admin Tasks","url":"/How-to Guides/SharePoint Online/SharePoint Admin Tasks#change-a-site-address","content":"Before you do anything Notify your users that you're making this change along with the following suggestions if they're relevant. When the change will happen.What the new URL will be.Users should close their files and not make edits during the address change.Users should check the site recycle bin to make sure it contains no files they want to keep.File permissions and sharing won't change. Go to Active sites in the new SharePoint admin center, and sign in with an account that has admin permissions for your organization.To open the details pane, select the site name.On the General tab, under URL, select Edit.Enter the new site address. Click Save. Re-using the old address When you change a site address, we create a redirect at the previous address. If you want to reuse the previous address, you need to delete the redirect. "},{"title":"Removing a previously used URL​","type":1,"pageTitle":"SharePoint Admin Tasks","url":"/How-to Guides/SharePoint Online/SharePoint Admin Tasks#removing-a-previously-used-url","content":"Microsoft docs link - Manage site redirects. Download the latest SharePoint Online module for PowerShell from here.Connect to SharePoint with an accoutn that is a Global Admin or SharePoint Admin.Run the following command Remove-SPOSite -Identity https://domainname.sharepoint.com/sites/OldSiteNameConfirm the action when you're prompted to do so. To confirm that the redirect has been deleted, browse to the URL. It should return a 404 error. You can also run Get-SPOSite -Identity https://domainname.sharepoint.com/sites/OldSiteName. It will return that we cannot get the site. "},{"title":"Get a list of redirects​","type":1,"pageTitle":"SharePoint Admin Tasks","url":"/How-to Guides/SharePoint Online/SharePoint Admin Tasks#get-a-list-of-redirects","content":"Get-SPOSite -Template REDIRECTSITE#0  "},{"title":"Troubleshooting a connectivity issue","type":0,"sectionRef":"#","url":"/Scenario based Guidance/Troubleshooting a connectivity issue","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Scenario for example​","type":1,"pageTitle":"Troubleshooting a connectivity issue","url":"/Scenario based Guidance/Troubleshooting a connectivity issue#scenario-for-example","content":"We've got a server hosting an application that is managing license assignment to a client installed application. Server name: lichost01.fakedomain.localServer IP: 192.168.1.15Client device name: clientdev01Client device IP: 192.168.1.35Application name: AmazingLicenseApplication Server Ports: Discovery port: 6015Licese retreival port: 5985 Client Ports: None specified We've got the application installed on the client machine and the license management application installed on the server however, the client application is unable to retreive licesnse from the server hosted application. The Vendor has said that the application configuration looks correct and asked for the network connection between the two devices to be tested. "},{"title":"What needs to be confirmed​","type":1,"pageTitle":"Troubleshooting a connectivity issue","url":"/Scenario based Guidance/Troubleshooting a connectivity issue#what-needs-to-be-confirmed","content":"Can the client device reach the server at all?Can the client device initiate a connection to the ports required? "},{"title":"Can the client device reach the server at all?​","type":1,"pageTitle":"Troubleshooting a connectivity issue","url":"/Scenario based Guidance/Troubleshooting a connectivity issue#can-the-client-device-reach-the-server-at-all","content":"Good command to use is test-netconnection, it can be abbreviated to tnc. This is the PowerShell equivalent (or close to) of telnet in CMD . Open PowerShell on the client device.Enter the command tnc -ComputerName lichost01 -Port 6015. We are getting a failure, both for the TCP connection and the Ping; both of these failures would suggest the machine is not reachable from the client device. tip Worth noting that ICMP or Ping is often blocked on networks, this is a wide spread practice, so do not rely on it. WARNING: PING\\ICMP connect to (lichost01) failed WARNING: TCP connect to (lichost01 : 6015) failed ComputerName : lichost01.fakedomain.local RemoteAddress : 192.168.1.15 RemotePort : 6015 InterfaceAlias : Wi-Fi SourceAddress : 192.168.1.35 PingSucceeded : False PingReplyDetails (RTT) : 11 ms TcpTestSucceeded : False  "},{"title":"Next step​","type":1,"pageTitle":"Troubleshooting a connectivity issue","url":"/Scenario based Guidance/Troubleshooting a connectivity issue#next-step","content":"Consult a network diagram of the infrastructure, note any devices or hops that are between the client device and the server.Check with a network engineer as to what is between the client device and the server. In this case, there's a VPN between the client device and the license application host server. After chatting with the network engineer, we've confirmed that both ports (6015 and 5985) were blocked by the VPN gateway device, being non-standard ports, that is always a possible issue. Now we want to re-run the network test. Open PowerShell on the client device.Enter the command tnc -ComputerName lichost01 -Port 6015. This time we see a successful ping communication to the server but, TCP is still failing. WARNING: TCP connect to (lichost01 : 6015) failed ComputerName : lichost01.fakedomain.local RemoteAddress : 192.168.1.15 RemotePort : 6015 InterfaceAlias : Wi-Fi SourceAddress : 192.168.1.35 PingSucceeded : True PingReplyDetails (RTT) : 11 ms TcpTestSucceeded : False  "},{"title":"Check what is blocking the TCP connection​","type":1,"pageTitle":"Troubleshooting a connectivity issue","url":"/Scenario based Guidance/Troubleshooting a connectivity issue#check-what-is-blocking-the-tcp-connection","content":"Now we've ruled out the VPN being the issue and the ping test is successful, we know the client device can reach the server but, now the client hosted application is unable to connect to port 5985 to retreive a license. "},{"title":"Check if the port is listening​","type":1,"pageTitle":"Troubleshooting a connectivity issue","url":"/Scenario based Guidance/Troubleshooting a connectivity issue#check-if-the-port-is-listening","content":"Connect to the server application.Open PowerShell.Type the command Get-NetTCPConnection -LocalPort 5985. You should get something like the below, if not then the port's not active at all. PS C:\\Users\\username&gt; Get-NetTCPConnection -LocalPort 5985 LocalAddress LocalPort RemoteAddress RemotePort State AppliedSetting ------------ --------- ------------- ---------- ----- -------------- :: 5985 :: 0 Listen  So from the above we can see the port is listening and waiting on connections but, the client app is still not able to retrieve a license. "},{"title":"Check Windows Firewall​","type":1,"pageTitle":"Troubleshooting a connectivity issue","url":"/Scenario based Guidance/Troubleshooting a connectivity issue#check-windows-firewall","content":"Open Resource Monitor from the start menu.Select the Network tab.Expand the Listening Ports section via the down arrow on the right. It should look something like this.  Scroll through the ports until you find the relevant port and confirm the Firewall Status. In our case, it's displaying the Firewall status as Not allowed, not restricted, which isn't that helpful but, does give us a hint that the Windows Firewall on the server maybe blocking the connection. tip Something to note, Windows firewall is filtering on the way in but, unless specified, outbound will match the rules that are inbound. So if something comes in on such and such a port, the firewall will presume it's allowed outbound (not necessarily on the same port though). "},{"title":"Adding a Windows Firewall rule​","type":1,"pageTitle":"Troubleshooting a connectivity issue","url":"/Scenario based Guidance/Troubleshooting a connectivity issue#adding-a-windows-firewall-rule","content":"Search in start for Windows Firewall with Advanced Security.Click Inbound Rules to load and view the other rules.Right-Click on Inbound Rules, click New Rule...Select Port.Select TCP &amp; add the port number (in this case 5985).Select Allow the connection and press next.Leave it as all 3 profiles selected.Enter a description name and description (more for the next person coming along than anything else).Press Finish. "},{"title":"Testing the connection again​","type":1,"pageTitle":"Troubleshooting a connectivity issue","url":"/Scenario based Guidance/Troubleshooting a connectivity issue#testing-the-connection-again","content":"Open PowerShell on the client device.Type the command tnc -ComputerName lichost01 -Port 5985. This time we see a successful TCP connection. Notice the information for the ping\\icmp test is ignored in a successful connection attempt. ComputerName : lichost01.fakedomain.local RemoteAddress : 192.168.1.15 RemotePort : 5985 InterfaceAlias : Wi-Fi SourceAddress : 192.168.1.35 TcpTestSucceeded : True  "},{"title":"Create an Automation Account","type":0,"sectionRef":"#","url":"/How-to Guides/Azure/Create an Automation Account","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Outline​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#outline","content":"Setup the Resource Group and Automation Account.Setup the Identity for the Automation Account, this is key to running scripts gainst Azure Active Directoy and Office 365 resources. Create ourselves a Runbook, that sits inside the Automation Account. Install the relevant modules for the code we want to run.Write ourselves a little script. Setup a schedule for the Runbook. "},{"title":"Setup the Resource Group and Automation Account.​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#setup-the-resource-group-and-automation-account","content":"Navigate to the Azure portal.Search for Automation Account in the search bar.Select the Automation Account option, Click create in the middle of the screen or Click +Add in the top left.Fill in the necessary information. Resource Group Name (Create one if needs be).Name.Region caution Make sure you Select the same region as the resources you want to query, if the account is to query something else, like Azure AD or Office 365, the region is not so important. Select the Advanced tab and Select the best option for you. System assigned, is attached to the automation account it lives and dies with the automation account resource.User assigned, is one you setup yourself in Azure AD and can be used by multiple resources and is completely seperate to your automation account. Click Review + Create to setup the resource. tip You'll need to assign Azure ADroles and App Permissions to the System or User managed Identity, Microsoft have decided not to make this easy and it needs to be done via command line. "},{"title":"Apply permissions to Managed(System assigned) Identity​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#apply-permissions-to-managedsystem-assigned-identity","content":"You'll need to apply the permissions to the Managed Identity using PowerShell unfortunatly, a Microsoft seem to have decided to make this difficult for us! Reference for where this came fromMicrosoft reference for command. Role names You'll need to find the correct role\\permission name that you want to assign using the script below. Try this Microsoft doc for the Microosft Graph API permissions. "},{"title":"The command​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#the-command","content":"The below is a script you can run but, you can run it line by line to see what is going on if that's more comfortable. The general gist is that you are applying the permissions from the Microsoft Graph App to your Managed Identity. tip This same idea works for any of the Microsoft applications, each serivce has an application that is registered in your tenant. You can apply roles from any of them in theory.  # Your tenant id. $TenantID=&quot;Add your tenant ID&quot; # Microsoft Graph App ID (DON'T CHANGE). $GraphAppId = &quot;00000003-0000-0000-c000-000000000000&quot; # Name of the manage identity (same as the Logic App name). $DisplayNameOfMSI=&quot;Add display name of Enterprise App&quot; # Check the Microsoft Graph documentation for the permission you need for the operation. $PermissionName = &quot;Add your permission here&quot; # Install the module (You need admin on the machine) Install-Module AzureAD # Connect to Azure AD via tenant ID, you'll need an admin account to login with though. Connect-AzureAD -TenantId $TenantID # Collects the Target System Managed Identities information into the MSI variable. $MSI = (Get-AzureADServicePrincipal -Filter &quot;displayName eq '$DisplayNameOfMSI'&quot;) Start-Sleep -Seconds 10 # Store the Microsoft Graph API informaiton into the GraphServicePrincipal variable. $GraphServicePrincipal = Get-AzureADServicePrincipal -Filter &quot;appId eq '$GraphAppId'&quot; # Searches Microsoft Graph API for the value matching the PermissionName variable populated above and stores this in the AppRole Variable. $AppRole = $GraphServicePrincipal.AppRoles | Where-Object {$_.Value -eq $PermissionName -and $_.AllowedMemberTypes -contains &quot;Application&quot;} # Assigned the permission from the Microsoft Graph API to the target Managed Identity. New-AzureADServiceAppRoleAssignment -ObjectId $MSI.ObjectId -ResourceId $GraphServicePrincipal.ObjectId -Id $appRole.Id -PrincipalId $MSI.ObjectId  Annotated the hell out of it as the command really confused me. Heads up! It takes a few minutes for this change to show in the GUI.If the permission already exists the prompt will error on the final command. "},{"title":"Setup Automation Runbook​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#setup-automation-runbook","content":"Sign in to the Azure portal.Search for and Select Automation Accounts.On the Automation Accounts page, Select your Automation account from the list.From the Automation account, Select Runbooks under Process Automation to open the list of runbooks.Click Create a runbook and fill in the information below. Name .Select its type.Select the Runtime versionEnter applicable Description Click Create to create the runbook. "},{"title":"Install any Modules​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#install-any-modules","content":"Sign in to the Azure portal.Search for and Select Automation Accounts.On the Automation Accounts page, Select your Automation account from the list.From the Automation account, Select Modules under Shared Resources. In here you can see a list of currently installed modules and you can add more by Clicking on the +Add a module button. tip You may find that you have to search around a bit for the module that you do actually want and when you do find the module you want, search for the command that you want to use, sometimes the module name is right but the command is missing! Microsoft Graph is probably the most well rounded module but, it's quite finicky to use, otherwise stick with the Az Command line. "},{"title":"Test Script​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#test-script","content":""},{"title":"Create the Script​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#create-the-script","content":"Navigate to your runbook.Click Edit at the top.Here you can enter your script. Useful options on the left hand side to note: CMDLETS, which you can use to find commands from the installed modules.ASSETS, which will show you the various resources available to your runbooks which are saved within your automation account resource. "},{"title":"Test Script​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#test-script-1","content":"Once your done and ready to test. Click on Test pane at the top.Click Start in the top left to being running the scrpt. I found it really hard to get my head around how this works for some reason. So expect that this may take quite a few tries to get right. Storage Account Key Before you can use the script as a base, you'll need to store the storage account key as a variable in your Automation account. Open your Automation Account.Click on Variables under Shared Resources.Click Add a variable.Create a new string variable. See the script for how to reference these in your runbooks. # Ensures you do not inherit an AzContext in your runbook Disable-AzContextAutosave -Scope Process | Out-Null #Storage Account Information $StorageACCKey = Get-AutomationVariable -Name 'stgacckey01' $ContainerName = &quot;Enter the blob container name&quot; # Connect using a Managed Service Identity try { Connect-AzAccount -Identity } catch{ Write-Output &quot;Unable to login. Aborting.&quot;; exit } $Users = Get-AzADUser | Select-Object DisplayName, Id, Mail, UserPrincipalName Write-Output $Users # Exports the data in the $Users variable into a local environmental variable that will store the information whilst running in the Automation account. $Users | Export-Csv &quot;$Env:temp\\Users.csv&quot; -notypeinformation # Creates a new context to enable connection to the storage account. $Context = New-AzureStorageContext -StorageAccountName &quot;whautomationfiledump&quot; -StorageAccountKey $StorageACCKey # This copes the csv file in the $Env:temp/MFAState.csv variable and copies it to the blob. Set-AzureStorageBlobContent -Context $Context -Container $ContainerName -File &quot;$Env:temp\\Users.csv&quot; -Blob &quot;Users.csv&quot; -force  In my experience The test window is not like a command promtp and will not output the commands running or anything at all apart from really confusing errors. Try to build error catching into your script, use the try, catch commands to write the errors to the promtp for debugging. More in this in the testing section at the bottom. "},{"title":"Setup the Schedule​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#setup-the-schedule","content":"This has been mostly regurgitated from this Microsoft link here. From your Automation account, on the left-hand pane Select Schedules under Shared Resources.Select Add a schedule.Select whether the schedule runs once or on a reoccurring schedule by Selecting Once or Recurring. If you Select Once, specify a start time and then Select Create.If you Select Recurring, specify a start time. For Recur every, Select how often you want the runbook to repeat. Select by hour, day, week, or month. Press Create to complete. tip You must publish the runbook before you can assign the schedule to it. Head back to your Runbook.Select Link to schedule at the top.Click the option to Link a schedule to your runbook, Select the schedule you created from the list.Click OK to complete. Example schedule below  "},{"title":"Testing​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#testing","content":""},{"title":"Testing the script​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#testing-the-script","content":"Error handling​ The test pane window for the most part will not output useful errors or show you how the script is running. I'd suggest building error handling and status updates into your script if you wish during debugging, it will help immensely. An example of the try, catch command sytax is below. # Connect using a Managed Service Identity try { Connect-AzAccount -Identity } catch{ Write-Output &quot;Unable to login. Aborting.&quot;; exit }  I'd also suggest using write-output all over the place to confirm progress and variables etc. Shout out to the VS code module for Automation Accounts, it'll let you pull down the runbook contents and edit in VsCode and upload it again. "},{"title":"Confirm the data export​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#confirm-the-data-export","content":"Navigate to your storage account.Click on the File shares or Containers option, wherever you saved your data to.Click into the share\\container, find your file and Click on the 3 dots to the right of it. Click View\\edit, it should display a basic output of the file. "},{"title":"Further notes​","type":1,"pageTitle":"Create an Automation Account","url":"/How-to Guides/Azure/Create an Automation Account#further-notes","content":"Run As accounts are being deprecated, this method is by far the easiest to use when trying to pull info from AzureAD and Office 365. "},{"title":"Setup Azure Lighthouse","type":0,"sectionRef":"#","url":"/How-to Guides/Azure/Setup Azure Lighthouse","content":"","keywords":"IT  KnowledgeBase  Microsoft  Azure  Computers"},{"title":"Prerequisites and Notes​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#prerequisites-and-notes","content":""},{"title":"Online Reading​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#online-reading","content":"Microsoft doc - What is Azure Lighthouse?.Microsoft doc - Onboard a customer to Azure Lighthouse. "},{"title":"Training​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#training","content":"From testing I found that many staff are over-whelmed or confused initially by the customer resources showing in their own managing tenant, consider setting up Lighthouse for your more technical staff first who can train the others.Consider keeping the permissions as simple as possible and only giving access to Lighthouse those who really need it. Subscription Filter. When you add a new customer via Lighthouse, you'll need to amend their subscription filter to show them. I'd highly recommend training staff to use the filter to work with one subscription or customer at a time, save making changes to the wrong client\\customer. "},{"title":"Permissions and Roles​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#permissions-and-roles","content":"Azure Roles. There are over 170 roles in Azure, that's a silly amount of trawl through to find the perfect combination to work with. Consider what you look after for your client\\customer and simplify it as much as possible, limiting access to the staff who really need it may be enough of a security control for you. If you're an MSP there are too many roles to consider, I'd suggest using at the minimum or two groups that assign the Contributor role and the Reader role seperately. You can use this segregation to seperate those who should look but not touch and those who need to administer and change.PIM elevation works to provide just-in-time access, you can setup an approval process for work.The Managed Services Registration assignment Delete Role, should be assigned so the managing tenant can remove their own Lighthouse delegation without asking the customer to do it.Contributor is the highest role you can assign through Lighthouse. "},{"title":"Azure Lighthouse Deployment​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#azure-lighthouse-deployment","content":"Despite what the documentation says, you can deploy one lighthouse offering to manage multiple subscriptions and resource groups.To have a valid ARM template\\offering you must have one permanently assigned role, such as Reader.Contributor is the highest role you can assign through Lighthouse. (Duplicated I know but, this is important!) "},{"title":"Setup Guidance and Information​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#setup-guidance-and-information","content":""},{"title":"Azure AD​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#azure-ad","content":"Create your groups in Azure AD, these groups will contain the staff members that will access to the customer\\client via Azure Lighthouse. I'd Suggest something like the below, the groups can be as granular as you like and as numerious as you like. Azure Lighthouse Contributor.Azure Lighthouse Reader. Role Assignment to staff business roles. I tried initially to setup groups for our finance team, so they'd be able to manage billing however, this didn't seem to work as I expected and required them to have acess to the Azure tenant. We found that Partner Centre solved this issue. "},{"title":"Azure Lighthouse Offering​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#azure-lighthouse-offering","content":"ARM Template​ Below is an outline and suggestion for each relevant configuratble options for the ARM template. On-boarding multiple Subscriptions or Resource Groups for one client\\customer. You can delegate multiple resource groups and subscriptions to the same delegation from the Service Providers dashboard\\blade in the customer tenant. The documentation for this may suggest otherwise but, it does work. Offering Name​ This will show in your customer tenant so make sure if reads &quot;nicely&quot;, I'd suggest something like the following. Managing Company Name Lighthouse Offering for Customer Name - Subscrption or Resource Group Name. Swap out the relevant information above if you use this naming convention. Description(s)​ This is also customer facing, my suggestion is below. Managing Company Name managed services offer to administer support resources.Managing Company Name offer to work on and administer project resources for project or PO number. Delegation Scope(s)​ You've got two options, Subscription and Resource Group, fairly self explenatory however, you cannot change these after deployment so make sure you select the right one for your needs. Authorizations​ Principal type: GroupName: Select one of the noted groups in section above.Display Name: Do not edit. (Friendly name that shows in customer tenant, will default to the group name) Role: Assign the roles noted against the groups above. Access Type: Permanent. "},{"title":"ARM template Example​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#arm-template-example","content":"You can ignore the top few lines until you find mspOfferName, close to this you'll find your description field. Change the defaultValue: information, not the description: information. Confirming your scope. &quot;$schema&quot;: &quot;https://schema.management.azure.com/schemas/2019-08-01/subscriptionDeploymentTemplate.json#&quot;,, this line should say subscription or resource deployment template, depending on what you selected. Similar situation with the mspOfferDescription: as well.  &quot;mspOfferName&quot;: { &quot;type&quot;: &quot;string&quot;, &quot;metadata&quot;: { &quot;description&quot;: &quot;Specify a unique name for your offer&quot; }, &quot;defaultValue&quot;: &quot;My Company Lighthouse Contributor Offer for Customer Name - Subscription Name &quot; }, &quot;mspOfferDescription&quot;: { &quot;type&quot;: &quot;string&quot;, &quot;metadata&quot;: { &quot;description&quot;: &quot;Name of the Managed Service Provider offering&quot; }, &quot;defaultValue&quot;: &quot;My Company managed services offer to administer support resources.&quot; }  Locate the variables: section to define your group and the Azure role assignments. managedByTenantId&quot; - is your tenant or partner tenant ID.&quot;authorizations&quot;: - Are you Azure Roles assignments.&quot;principalId&quot; - Is your object in the managing tenant.&quot;roleDefinitionId&quot; - Is the Azure AD role you've assigned. In the case below, it's Contributor and the Managed Services Registration assignment Delete roles.&quot;principalIdDisplayName&quot; - Is your friendly Group name, this will show in your customer tenant, it does not need to match the group name in the managing tenant. You'll see some of the information repeated for each role you assign to the same object in the manging tenant. &quot;variables&quot;: { &quot;mspRegistrationName&quot;: &quot;[guid(parameters('mspOfferName'))]&quot;, &quot;mspAssignmentName&quot;: &quot;[guid(parameters('mspOfferName'))]&quot;, &quot;managedByTenantId&quot;: &quot;Your tenant ID&quot;, &quot;authorizations&quot;: [ { &quot;principalId&quot;: &quot;Your object in the managing tenant&quot;, &quot;roleDefinitionId&quot;: &quot;b24988ac-6180-42a0-ab88-20f7382dd24c&quot;, &quot;principalIdDisplayName&quot;: &quot;Lighthouse Contributor&quot; }, { &quot;principalId&quot;: &quot;Your object in the managing tenant&quot;, &quot;roleDefinitionId&quot;: &quot;91c1777a-f3dc-4fae-b103-61d183457e46&quot;, &quot;principalIdDisplayName&quot;: &quot;Lighthouse Contributor&quot; } ] },  You can edit the JSON template directly! You don't need to always duck back into Azure Lighthouse to create the templates, you can just edit the JSON files if you're comfortable doing so. "},{"title":"Implementation steps​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#implementation-steps","content":"Below are the cut down version steps for deploying the product at at high level. Requisites - Customer tenant IDs. - Requred for command line and Azure Marketplace deployments. - Applicable customer Subscription(s) IDs. - Requred for command line and Azure Marketplace deployments. - Setup 2 Groups (within Azure AD), with the roles noted: - - Lighthouse Contributor: Contributor, Managed Services Registration assignment Delete Role. - Lighthouse Reader: Reader. Steps to create the Azure Lighthouse Delegation offering: 1. Navigate to the Azure Lighthouse Blade in managing Azure tenant. 2. Create a new Arm template, name it appropriately. 3. Assign the groups created above to the Azure roles available in the Wizard. 4. Complete the Wizard and download the ARM template. Setting up the delegation in the Customer Tenant: 1. Login to customer Azure Tenant. 2. Search Azure for the Service Providers Blade. 3. Click Add offer, Select Add via template. 4. Upload the ARM template. 5. Select the plus symbol next to the new entry in the list. 6. Click Delegate subscriptions. 7. Select the subscriptions from the list. 8. Check the confirmation box at the bottom and click Delegate. Repeat this for each customer. Backout Plan Remove the delegation. From the partner tenant (requires the `Managed Services Registration assignment Delete Role`. ) 1. Navigate to the My customers page. 2. Select Delegations. 3. Find the delegation you want to remove, then select the trash can icon that appears in its row. Failing this method, login to the customer tenant with Global Admin Priviliges and remove the delegation from the Service Providers blade.  "},{"title":"Using Lighthouse​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#using-lighthouse","content":"tip The methods below are 2 direct methods for accessing customers, you'll be able to see their resources in the portal as if they were your own without having to use the two methods below. "},{"title":"Via the Lighthouse blade​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#via-the-lighthouse-blade","content":"Open the Azure Management Portal.Search for Azure Lighthouse.Click on the Delegations option on the left-hand side, you may need to click manage my customers if you’ve no connections.You will then see your list of your customer’s subscriptions that you have access to. "},{"title":"Via the subscriptions blade​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#via-the-subscriptions-blade","content":"You'll need to show the customer in the subscription fitler first though. Open the Azure Management Portal.Navigate to the Subscriptions blade.The list of subscriptions will also list the customer subscriptions you have access too. You won't see the the customer subscriptions straight away! You need to first enable this in the Subscription filter. In the Azure portal, Select the Directory + subscriptions or Settings icon in the top right of the page.In the Directories + subscriptions settings page, ensure that the Advanced filters toggle is turned off.In the Default subscription filter section, select the appropriate directory and subscription. info If you have been granted access to one or more resource groups, rather than to an entire subscription, select the subscription to which that resource group belongs. You'll then work in the context of that subscription, but will only be able to access the designated resource group(s). "},{"title":"Partner Earned Credit (PEC) using PAL​","type":1,"pageTitle":"Setup Azure Lighthouse","url":"/How-to Guides/Azure/Setup Azure Lighthouse#partner-earned-credit-pec-using-pal","content":"PAL - Partner Admin link PAL is how a partner can be recognised by Microsoft for their work in Azure on-behalf-of their customer. Microsoft doc - Associate your partner ID when you onboard new customers vai Lighthouse.Microsoft doc - Link a PartnerID with PAL or DPOR for PAL To do this via Lighthouse, in a nutshell. Create a service principal user account in your managing tenant.Using that service principal account, link to your Associated Partner ID in your managing tenant.Include at least one authorization which includes the service principal Account as a user with an Azure built-in role that is eligible for PEC. caution This role must be granted as a permanent assignment, not as a just-in-time eligible authorization, in order for PEC to apply. "}]